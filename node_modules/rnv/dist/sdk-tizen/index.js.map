{"version":3,"sources":["../../src/sdk-tizen/index.js"],"names":["xml2js","require","parser","Parser","formatXMLObject","obj","platArr","platform","platKeyArr","key","reduce","acc","cur","name","$t","DEFAULT_SECURITY_PROFILE_NAME","DEFAULT_CERTIFICATE_NAME","DEFAULT_CERTIFICATE_NAME_WITH_EXTENSION","configureTizenGlobal","c","Promise","resolve","reject","tizenAuthorCert","path","join","paths","workspace","dir","createDevelopTizenCertificate","then","catch","e","launchTizenSimulator","CLI_TIZEN_EMULATOR","detached","listTizenTargets","targets","targetArr","split","targetStr","Object","keys","forEach","i","certDirPath","certFilename","certPassword","CLI_TIZEN","privateParams","addDevelopTizenCertificate","profileName","certPath","secureProfileConfig","_getDeviceID","target","device","program","CLI_SDB_TIZEN","connectResponse","includes","Error","devicesList","lines","trim","devices","filter","line","length","deviceID","_getRunningDevices","all","map","words","replace","ignoreErrors","deviceInfoXML","parseStringPromise","parseObj","deviceInfo","deviceType","push","type","id","_waitForEmulatorToBeReady","res","_composeDevicesString","value","_runTizenSimOrDevice","hosted","runtime","platformConfig","buildConfig","platforms","bundleAssets","isHosted","grey","white","appConfig","config","appName","tDir","tBuild","tOut","tId","wgt","wgtClean","certProfile","certificateProfile","askForEmulator","inquirer","prompt","message","startEmulator","defaultTarget","files","defaultTargets","continueLaunching","RENATIVE_CONFIG_NAME","hasDevice","packageID","err","bold","toReturn","isTargetSpecified","net","isIP","targetDevice","find","choices","chosenEmulator","runTizen","port","isPortActive","resetCompleted","skipActiveServerCheck","isWeinreEnabled","REMOTE_DEBUGGER_ENABLED_PLATFORMS","logError","buildTizenProject","cyan","_isGlobalConfigured","configureTizenProject","platformBuildsProjectPath","RNV_PROJECT_DIR_NAME","RNV_SERVER_DIR_NAME","configureProject","configFile","p","injects","pattern","override","package","semver","coerce"],"mappings":"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","sourcesContent":["import path from 'path';\nimport semver from 'semver';\nimport inquirer from 'inquirer';\nimport net from 'net';\n\nimport { execCLI } from '../core/systemManager/exec';\nimport {\n    RENATIVE_CONFIG_NAME,\n    CLI_TIZEN_EMULATOR,\n    CLI_TIZEN,\n    CLI_SDB_TIZEN,\n    REMOTE_DEBUGGER_ENABLED_PLATFORMS,\n    RNV_PROJECT_DIR_NAME,\n    RNV_SERVER_DIR_NAME\n} from '../core/constants';\nimport {\n    // getAppFolder,\n    // getAppSubFolder,\n    getPlatformProjectDir,\n    // getPlatformBuildDir,\n    getTemplateProjectDir,\n    // getTemplateDir,\n    getAppVersion,\n    // getAppTemplateFolder,\n    getConfigProp,\n    checkPortInUse,\n    confirmActiveBundler,\n    addSystemInjects\n} from '../core/common';\nimport {\n    chalk,\n    logTask,\n    logError,\n    logWarning,\n    logDebug,\n    logSuccess,\n    logToSummary,\n    logInfo\n} from '../core/systemManager/logger';\nimport { waitForEmulator } from '../core/targetManager';\nimport { isPlatformActive } from '../core/platformManager';\nimport { fsExistsSync, writeCleanFile, fsRenameSync } from '../core/systemManager/fileutils';\nimport { buildWeb, runWebpackServer, configureCoreWebProject, waitForWebpack } from '../sdk-webpack';\n\nimport {\n    copyAssetsFolder,\n    copyBuildsFolder\n} from '../core/projectManager/projectParser';\n\n\nconst xml2js = require('xml2js');\n\nconst parser = new xml2js.Parser();\n\n\nconst formatXMLObject = (obj) => {\n    const platArr = obj['model-config']?.platform;\n    const platKeyArr = platArr?.[0]?.key || platArr?.key;\n    if (platKeyArr) {\n        return {\n            ...platKeyArr.reduce((acc, cur) => {\n                acc[cur.name] = cur.$t;\n                return acc;\n            }, {})\n        };\n    }\n    logWarning('Invalid object received from shell cat /etc/config/model-config.xml');\n    return {};\n};\n\nconst DEFAULT_SECURITY_PROFILE_NAME = 'RNVanillaCert';\nconst DEFAULT_CERTIFICATE_NAME = 'tizen_author';\nconst DEFAULT_CERTIFICATE_NAME_WITH_EXTENSION = `${DEFAULT_CERTIFICATE_NAME}.p12`;\n\nexport const configureTizenGlobal = c => new Promise((resolve, reject) => {\n    logTask('configureTizenGlobal');\n    // Check Tizen Cert\n    // if (isPlatformActive(c, TIZEN) || isPlatformActive(c, TIZEN_WATCH)) {\n    const tizenAuthorCert = path.join(c.paths.workspace.dir, DEFAULT_CERTIFICATE_NAME_WITH_EXTENSION);\n    if (fsExistsSync(tizenAuthorCert)) {\n        logDebug(`${DEFAULT_CERTIFICATE_NAME_WITH_EXTENSION} file exists!`);\n        resolve();\n    } else {\n        logWarning(\n            `${DEFAULT_CERTIFICATE_NAME_WITH_EXTENSION} file missing! Creating one for you...`\n        );\n        createDevelopTizenCertificate(c)\n            .then(() => resolve())\n            .catch(e => reject(e));\n    }\n    // }\n});\n\nexport const launchTizenSimulator = (c, name) => {\n    logTask(`launchTizenSimulator:${name}`);\n\n    if (name) {\n        return execCLI(c, CLI_TIZEN_EMULATOR, `launch --name ${name}`, {\n            detached: true\n        });\n    }\n    return Promise.reject('No simulator -t target name specified!');\n};\n\nexport const listTizenTargets = async (c) => {\n    const targets = await execCLI(c, CLI_TIZEN_EMULATOR, 'list-vm', {\n        detached: true\n    });\n    const targetArr = targets.split('\\n');\n    let targetStr = '';\n    Object.keys(targetArr).forEach((i) => {\n        targetStr += `[${i}]> ${targetArr[i]}\\n`;\n    });\n    logToSummary(`Tizen Targets:\\n${targetStr}`);\n};\n\nexport const createDevelopTizenCertificate = c => new Promise((resolve) => {\n    logTask('createDevelopTizenCertificate');\n\n    const certDirPath = c.paths.workspace.dir;\n    const certFilename = DEFAULT_CERTIFICATE_NAME;\n    const certPassword = '1234';\n\n    execCLI(\n        c,\n        CLI_TIZEN,\n        `certificate -- ${certDirPath} -a rnv -f ${certFilename} -p ${certPassword}`,\n        { privateParams: [certPassword] },\n    )\n        .then(() => addDevelopTizenCertificate(c, {\n            profileName: DEFAULT_SECURITY_PROFILE_NAME,\n            certPath: path.join(certDirPath, `${certFilename}.p12`),\n            certPassword,\n        }))\n        .then(() => resolve())\n        .catch((e) => {\n            logError(e);\n            resolve();\n        });\n});\n\nexport const addDevelopTizenCertificate = (c, secureProfileConfig) => new Promise((resolve) => {\n    logTask('addDevelopTizenCertificate');\n\n    const { profileName, certPath, certPassword } = secureProfileConfig || {};\n    execCLI(\n        c,\n        CLI_TIZEN,\n        `security-profiles add -n ${profileName} -a ${certPath} -p ${certPassword}`,\n        { privateParams: [certPassword] },\n    )\n        .then(() => resolve())\n        .catch((e) => {\n            logError(e);\n            resolve();\n        });\n});\n\nconst _getDeviceID = async (c, target) => {\n    const { device } = c.program;\n\n    if (device) {\n        let connectResponse;\n        try {\n            connectResponse = await execCLI(\n                c,\n                CLI_SDB_TIZEN,\n                `connect ${target}`\n            );\n        } catch (e) {\n            connectResponse = e;\n        }\n        if (connectResponse.includes('EPERM')) {\n            throw new Error(\n                \"We can't connect to this device even though it is reachable. Please make sure you have enabled Developer Mode and you have added your IP in the Host PC IP section. For more information consult https://developer.samsung.com/tv/develop/getting-started/using-sdk/tv-device\"\n            );\n        }\n        if (connectResponse.includes('failed to connect to remote target')) {\n            throw new Error(\n                `Failed to connect to ${target}. Make sure the IP is correct and you are connected on the same network.`\n            );\n        }\n        if (connectResponse.includes('error')) throw new Error(connectResponse);\n    }\n\n    const devicesList = await execCLI(c, CLI_SDB_TIZEN, 'devices');\n    if (devicesList.includes(target)) {\n        const lines = devicesList.trim().split(/\\r?\\n/);\n        const devices = lines.filter(line => line.includes(target));\n\n        if (devices.length > 1) {\n            // @todo handle more than one\n        }\n\n        const deviceID = devices[0].split('device')[1].trim();\n        return deviceID;\n    }\n    return Promise.reject(`No device matching ${target} could be found.`);\n};\n\nconst _getRunningDevices = async (c) => {\n    const { platform } = c.program;\n    const devicesList = await execCLI(c, CLI_SDB_TIZEN, 'devices');\n    const lines = devicesList\n        .trim()\n        .split(/\\r?\\n/)\n        .filter(line => !line.includes('List of devices'));\n    const devices = [];\n\n    await Promise.all(\n        lines.map(async (line) => {\n            const words = line.replace(/\\t/g, '').split('    ');\n            if (words.length >= 3) {\n                const name = words[0].trim();\n                const deviceInfoXML = await execCLI(\n                    c,\n                    CLI_SDB_TIZEN,\n                    `-s ${name} shell cat /etc/config/model-config.xml`,\n                    { ignoreErrors: true }\n                );\n\n                let deviceInfo;\n                let deviceType;\n\n                if (deviceInfoXML !== true && deviceInfoXML !== '') {\n                    // for some reason the tv does not connect through sdb\n\n                    const parseObj = await parser.parseStringPromise(deviceInfoXML);\n\n                    deviceInfo = formatXMLObject(parseObj);\n                    deviceType = deviceInfo['tizen.org/feature/profile'];\n                }\n\n                if (\n                    (platform === 'tizenmobile' && deviceType === 'mobile')\n                    || (platform === 'tizenwatch' && deviceType === 'wearable')\n                    || (platform === 'tizen' && !deviceType)\n                ) {\n                    devices.push({\n                        name,\n                        type: words[1].trim(),\n                        id: words[2].trim(),\n                        deviceType\n                    });\n                }\n            }\n        })\n    );\n\n    return devices;\n};\n\nconst _waitForEmulatorToBeReady = (c, target) => waitForEmulator(c, CLI_SDB_TIZEN, 'devices', (res) => {\n    const lines = res.trim().split(/\\r?\\n/);\n    const devices = lines.filter(\n        line => line.includes(target) && line.includes('device')\n    );\n    return devices.length > 0;\n});\n\nconst _composeDevicesString = devices => devices.map(device => ({\n    key: device.id,\n    name: device.name,\n    value: device.id\n}));\n\n// const startHostedServerIfRequired = (c) => {\n//     if (Config.isWebHostEnabled) {\n//         return rnvStart(c);\n//     }\n// };\n\nconst _runTizenSimOrDevice = async (c) => {\n    const { hosted } = c.program;\n    const { target } = c.runtime;\n    const { platform } = c;\n\n    const platformConfig = c.buildConfig.platforms[platform];\n    const bundleAssets = getConfigProp(c, platform, 'bundleAssets');\n    const isHosted = hosted ?? !bundleAssets;\n\n    if (!bundleAssets && !hosted) {\n        // console.log('RUN WEINRE');\n    }\n\n    if (!platformConfig) {\n        throw new Error(\n            `runTizen: ${chalk().grey(\n                platform\n            )} not defined in your ${chalk().white(c.paths.appConfig.config)}`\n        );\n    }\n    if (!platformConfig.appName) {\n        throw new Error(\n            `runTizen: ${chalk().grey(\n                platform\n            )}.appName not defined in your ${chalk().white(\n                c.paths.appConfig.config\n            )}`\n        );\n    }\n\n    const tDir = getPlatformProjectDir(c);\n    const tBuild = path.join(tDir, 'build');\n    const tOut = path.join(tDir, 'output');\n    const tId = platformConfig.id;\n    const wgt = `${platformConfig.appName}.wgt`;\n    // the tizen CLI cannot handle .wgt files with spaces correctly.\n    const wgtClean = `${platformConfig.appName.replace(/[^a-z0-9]/gi, '_')}.wgt`;\n    const certProfile = platformConfig.certificateProfile ?? DEFAULT_SECURITY_PROFILE_NAME;\n\n    let deviceID;\n\n    const askForEmulator = async () => {\n        const { startEmulator } = await inquirer.prompt([\n            {\n                name: 'startEmulator',\n                type: 'confirm',\n                message: `Could not find or connect to the specified target (${\n                    target\n                }). Would you like to start an emulator?`\n            }\n        ]);\n\n        if (startEmulator) {\n            const defaultTarget = c.files.workspace.config.defaultTargets[platform];\n            try {\n                await launchTizenSimulator(c, defaultTarget);\n                deviceID = defaultTarget;\n                await _waitForEmulatorToBeReady(c, defaultTarget);\n                return continueLaunching();\n            } catch (e) {\n                logDebug(`askForEmulator:ERRROR: ${e}`);\n                try {\n                    await execCLI(\n                        c,\n                        CLI_TIZEN_EMULATOR,\n                        `create -n ${defaultTarget} -p tv-samsung-5.0-x86`\n                    );\n                    await launchTizenSimulator(c, defaultTarget);\n                    deviceID = defaultTarget;\n                    await _waitForEmulatorToBeReady(c, defaultTarget);\n                    return continueLaunching();\n                } catch (err) {\n                    logDebug(err);\n                    logError(\n                        `Could not find the specified target and could not create the emulator automatically.\nPlease create one and then edit the default target from ${c.paths.workspace.dir}/${RENATIVE_CONFIG_NAME}`\n                    );\n                }\n            }\n        }\n    };\n\n    const continueLaunching = async () => {\n        let hasDevice = false;\n\n        !isHosted && (await buildWeb(c));\n        await execCLI(c, CLI_TIZEN, `build-web -- ${tDir} -out ${tBuild}`);\n        await execCLI(\n            c,\n            CLI_TIZEN,\n            `package -- ${tBuild} -s ${certProfile} -t wgt -o ${tOut}`\n        );\n\n        try {\n            const packageID = platform === 'tizenwatch' || platform === 'tizenmobile'\n                ? tId.split('.')[0]\n                : tId;\n            await execCLI(\n                c,\n                CLI_TIZEN,\n                `uninstall -p ${packageID} -t ${deviceID}`,\n                { ignoreErrors: true }\n            );\n            hasDevice = true;\n        } catch (e) {\n            if (e && e.includes && e.includes('No device matching')) {\n                await launchTizenSimulator(c, target);\n                hasDevice = await _waitForEmulatorToBeReady(c, target);\n            }\n        }\n        try {\n            if (wgtClean !== wgt) {\n                logInfo(`Your app name contains characters like spaces, changing output from \"${\n                    wgt}\" to \"${wgtClean}\"`);\n                fsRenameSync(path.join(tOut, wgt), path.join(tOut, wgtClean));\n            }\n        } catch (err) {\n            logError(err);\n        }\n        try {\n            await execCLI(\n                c,\n                CLI_TIZEN,\n                `install -- ${tOut} -n ${wgtClean} -t ${deviceID}`\n            );\n            hasDevice = true;\n        } catch (err) {\n            logError(err);\n            logWarning(\n                `There is no emulator or device connected! Let's try to launch it. \"${chalk().white.bold(\n                    `rnv target launch -p ${platform} -t ${target}`\n                )}\"`\n            );\n\n            await launchTizenSimulator(c, target);\n            hasDevice = await _waitForEmulatorToBeReady(c, target);\n        }\n\n        const toReturn = true;\n\n        // if (isHosted) {\n        //     toReturn = startHostedServerIfRequired(c);\n        //     await waitForWebpack(c);\n        // }\n\n        if (\n            platform !== 'tizenwatch'\n          && platform !== 'tizenmobile'\n          && hasDevice\n        ) {\n            await execCLI(c, CLI_TIZEN, `run -p ${tId} -t ${deviceID}`);\n        } else if (\n            (platform === 'tizenwatch' || platform === 'tizenmobile')\n          && hasDevice\n        ) {\n            const packageID = tId.split('.');\n            await execCLI(\n                c,\n                CLI_TIZEN,\n                `run -p ${packageID[0]} -t ${deviceID}`\n            );\n        }\n        return toReturn;\n    };\n\n    // Check if target is present or it's the default one\n    const isTargetSpecified = c.program.target;\n\n    // Check for running devices\n    const devices = await _getRunningDevices(c);\n\n    if (isTargetSpecified) {\n        // The user requested a specific target, searching for it in active ones\n        if (net.isIP(target)) {\n            deviceID = await _getDeviceID(c, target);\n            return continueLaunching();\n        }\n\n        if (devices.length > 0) {\n            const targetDevice = devices.find(\n                device => device.id === target || device.name === target\n            );\n            if (targetDevice) {\n                deviceID = targetDevice.id;\n                return continueLaunching();\n            }\n        }\n        try {\n            // try to launch it, see if it's a simulator that's not started yet\n            await launchTizenSimulator(c, target);\n            await _waitForEmulatorToBeReady(c, target);\n            deviceID = target;\n            return continueLaunching();\n        } catch (e) {\n            return askForEmulator();\n        }\n    } else {\n        if (devices.length === 1) {\n            deviceID = devices[0].id;\n            return continueLaunching();\n        }\n        if (devices.length > 1) {\n            const choices = _composeDevicesString(devices);\n            const { chosenEmulator } = await inquirer.prompt([\n                {\n                    name: 'chosenEmulator',\n                    type: 'list',\n                    message: 'On what emulator would you like to run the app?',\n                    choices\n                }\n            ]);\n            deviceID = chosenEmulator;\n            return continueLaunching();\n        }\n        return askForEmulator();\n    }\n};\n\nexport const runTizen = async (c, target) => {\n    logTask('runTizen', `target:${target}`);\n    const { platform } = c;\n    const { hosted } = c.program;\n\n\n    const isHosted = hosted && !getConfigProp(c, platform, 'bundleAssets');\n\n    if (isHosted) {\n        const isPortActive = await checkPortInUse(c, platform, c.runtime.port);\n        if (isPortActive) {\n            const resetCompleted = await confirmActiveBundler(c);\n            c.runtime.skipActiveServerCheck = !resetCompleted;\n        }\n    }\n\n    logTask('runTizen', `target:${target} hosted:${!!isHosted}`);\n    if (isHosted) return;\n\n    const bundleAssets = getConfigProp(c, platform, 'bundleAssets') === true;\n\n    if (bundleAssets) {\n        await buildWeb(c);\n        await _runTizenSimOrDevice(c);\n    } else {\n        const isPortActive = await checkPortInUse(c, platform, c.runtime.port);\n        const isWeinreEnabled = REMOTE_DEBUGGER_ENABLED_PLATFORMS.includes(platform) && !bundleAssets && !hosted;\n\n        if (!isPortActive) {\n            logInfo(\n                `Your ${chalk().white(\n                    platform\n                )} devServer at port ${chalk().white(\n                    c.runtime.port\n                )} is not running. Starting it up for you...`\n            );\n            waitForWebpack(c)\n                .then(() => _runTizenSimOrDevice(c))\n                .catch(logError);\n            await runWebpackServer(c, isWeinreEnabled);\n        } else {\n            const resetCompleted = await confirmActiveBundler(c);\n\n            if (resetCompleted) {\n                waitForWebpack(c)\n                    .then(() => _runTizenSimOrDevice(c))\n                    .catch(logError);\n                await runWebpackServer(c, isWeinreEnabled);\n            } else {\n                await _runTizenSimOrDevice(c);\n            }\n        }\n    }\n};\n\nexport const buildTizenProject = async (c) => {\n    logTask('buildTizenProject');\n\n    const { platform } = c;\n\n    const platformConfig = c.buildConfig.platforms[platform];\n    const tDir = getPlatformProjectDir(c);\n\n    await buildWeb(c);\n    if (!c.program.hosted) {\n        const tOut = path.join(tDir, 'output');\n        const tBuild = path.join(tDir, 'build');\n        const certProfile = platformConfig.certificateProfile ?? DEFAULT_SECURITY_PROFILE_NAME;\n\n        await execCLI(c, CLI_TIZEN, `build-web -- ${tDir} -out ${tBuild}`);\n        await execCLI(\n            c,\n            CLI_TIZEN,\n            `package -- ${tBuild} -s ${certProfile} -t wgt -o ${tOut}`\n        );\n\n        logSuccess(\n            `Your WGT package is located in ${chalk().cyan(tOut)} .`\n        );\n    }\n\n    return true;\n};\n\nlet _isGlobalConfigured = false;\n\nexport const configureTizenProject = async (c) => {\n    logTask('configureTizenProject');\n\n    const { platform } = c;\n\n    c.runtime.platformBuildsProjectPath = `${getPlatformProjectDir(c)}`;\n\n    if (!isPlatformActive(c, platform)) {\n        return;\n    }\n\n    if (!_isGlobalConfigured) {\n        _isGlobalConfigured = true;\n        await configureTizenGlobal(c);\n    }\n\n    const bundleAssets = getConfigProp(c, platform, 'bundleAssets') === true;\n\n    await copyAssetsFolder(c, platform);\n    await configureCoreWebProject(c, bundleAssets ? RNV_PROJECT_DIR_NAME : RNV_SERVER_DIR_NAME);\n    await configureProject(c);\n    return copyBuildsFolder(c, platform);\n};\n\nexport const configureProject = c => new Promise((resolve) => {\n    logTask('configureProject');\n    const { platform } = c;\n\n    const configFile = 'config.xml';\n    const p = c.buildConfig.platforms[platform];\n\n    const injects = [\n        { pattern: '{{PACKAGE}}', override: p.package },\n        { pattern: '{{ID}}', override: p.id },\n        { pattern: '{{APP_NAME}}', override: p.appName },\n        { pattern: '{{APP_VERSION}}', override: semver.coerce(getAppVersion(c, platform)) }\n    ];\n\n    addSystemInjects(c, injects);\n\n    writeCleanFile(\n        path.join(getTemplateProjectDir(c), configFile),\n        path.join(getPlatformProjectDir(c), configFile),\n        injects, null, c\n    );\n\n    resolve();\n});\n"],"file":"index.js"}