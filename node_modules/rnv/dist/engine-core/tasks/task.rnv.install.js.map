{"version":3,"sources":["../../../src/engine-core/tasks/task.rnv.install.js"],"names":["taskRnvInstall","c","parentTask","_requiresNpmInstall","runtime","skipPackageUpdate","program","only","description","fn","task","params","PARAMS","withBase","platforms","skipPlatforms"],"mappings":"yQAAA;AACA;AACA;AACA;;AAEO,GAAMA,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAOC,CAAP,CAAUC,UAAV;AAC1B,oBAAQ,gBAAR,oBAA6C,CAAC,CAACD,CAAC,CAACE,mBAAjD,KAAwE,CAACF,CAAC,CAACG,OAAF,CAAUC,iBAAnF,EAD0B;;AAGtBJ,CAAC,CAACK,OAAF,CAAUC,IAAV,EAAkB,CAAC,CAACL,UAHE,0DAGiB,IAHjB;;;AAMtB,CAAC,qCAAD,EAA+BD,CAAC,CAACE,mBAAF,EAAyB,CAACF,CAAC,CAACG,OAAF,CAAUC,iBAN7C;AAOtB,GAAI,CAAC,qCAAL,CAAgC;AAC5B;AACI,+CADJ;;AAGH,CAJD,IAIO;AACH;AACI,mDADJ;;AAGH;AACDJ,CAAC,CAACE,mBAAF,CAAwB,KAAxB,CAhBsB;AAiBhB,wDAAqCF,CAArC,CAjBgB;;AAmBnB,IAnBmB,uEAAvB,C;;;AAsBQ;AACXO,WAAW,CAAE,8CADF;AAEXC,EAAE,CAAET,cAFO;AAGXU,IAAI,CAAE,SAHK;AAIXC,MAAM,CAAEC,kBAAOC,QAAP,EAJG;AAKXC,SAAS,CAAE,EALA;AAMXC,aAAa,CAAE,IANJ,C","sourcesContent":["import { areNodeModulesInstalled } from '../../core/common';\nimport { PARAMS } from '../../core/constants';\nimport { installPackageDependenciesAndPlugins } from '../../core/pluginManager';\nimport { logTask, logInfo } from '../../core/systemManager/logger';\n\nexport const taskRnvInstall = async (c, parentTask) => {\n    logTask('taskRnvInstall', `requiresInstall:${!!c._requiresNpmInstall}:${!c.runtime.skipPackageUpdate}`);\n\n    if (c.program.only && !!parentTask) return true;\n\n    // Check node_modules\n    if (!areNodeModulesInstalled() || (c._requiresNpmInstall && !c.runtime.skipPackageUpdate)) {\n        if (!areNodeModulesInstalled()) {\n            logInfo(\n                'node_modules folder is missing. INSTALLING...'\n            );\n        } else {\n            logInfo(\n                'node_modules folder is out of date. INSTALLING...'\n            );\n        }\n        c._requiresNpmInstall = false;\n        await installPackageDependenciesAndPlugins(c);\n    }\n    return true;\n};\n\nexport default {\n    description: 'Install package node_modules via yarn or npm',\n    fn: taskRnvInstall,\n    task: 'install',\n    params: PARAMS.withBase(),\n    platforms: [],\n    skipPlatforms: true,\n};\n"],"file":"task.rnv.install.js"}