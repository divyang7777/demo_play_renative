{"version":3,"sources":["../../../src/engine-core/tasks/task.rnv.crypto.installProfiles.js"],"names":["taskRnvCryptoInstallProfiles","c","parentTask","originTask","TASK_PROJECT_CONFIGURE","TASK_CRYPTO_INSTALL_PROFILES","platform","ppFolder","path","join","paths","home","dir","list","workspace","project","mobileprovisionArr","filter","v","endsWith","forEach","e","description","fn","task","params","PARAMS","withBase","platforms","skipPlatforms"],"mappings":"uRAAA;AACA;;;;;;AAMA;;;;;;AAMA;AACA;;;AAGO,GAAMA,CAAAA,4BAA4B,CAAG,QAA/BA,CAAAA,4BAA+B,CAAOC,CAAP,CAAUC,UAAV,CAAsBC,UAAtB;AACxC,oBAAQ,8BAAR,EADwC;;AAGlC,+BAAYF,CAAZ,CAAeG,iCAAf,CAAuCC,uCAAvC,CAAqEF,UAArE,CAHkC;;AAKpCF,CAAC,CAACK,QAAF,GAAe,KALqB;AAMpC;AAC8CL,CAAC,CAACK,QADhD,mBANoC;;AAS7B,IAT6B;;;AAYlCC,QAZkC,CAYvBC,cAAKC,IAAL;AACbR,CAAC,CAACS,KAAF,CAAQC,IAAR,CAAaC,GADA;AAEb,4CAFa,CAZuB;;;AAiBxC,GAAI,CAAC,4BAAaL,QAAb,CAAL,CAA6B;AACzB,iCAAqBA,QAArB;AACA,yBAAUA,QAAV;AACH;;AAEKM,IAtBkC,CAsB3B,+BAAgBZ,CAAC,CAACS,KAAF,CAAQI,SAAR,CAAkBC,OAAlB,CAA0BH,GAA1C,CAtB2B;AAuBlCI,kBAvBkC,CAuBbH,IAAI,CAACI,MAAL,CAAY,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,QAAF,CAAW,kBAAX,CAAJ,EAAb,CAvBa;;AAyBxC,GAAI;AACAH,kBAAkB,CAACI,OAAnB,CAA2B,SAACF,CAAD,CAAO;AAC9B,kEAAsDA,CAAtD;AACA,4BAAaA,CAAb,CAAgBX,QAAhB;AACH,CAHD;AAIH,CAAC,MAAOc,CAAP,CAAU;AACR,qBAASA,CAAT;AACH,CAhCuC;;AAkCjC,IAlCiC,wEAArC,C;;;AAqCQ;AACXC,WAAW,CAAE,EADF;AAEXC,EAAE,CAAEvB,4BAFO;AAGXwB,IAAI,CAAEnB,uCAHK;AAIXoB,MAAM,CAAEC,kBAAOC,QAAP,EAJG;AAKXC,SAAS,CAAE,EALA;AAMXC,aAAa,CAAE,IANJ,C","sourcesContent":["import path from 'path';\nimport {\n    logWarning,\n    logError,\n    logTask,\n    logDebug\n} from '../../core/systemManager/logger';\nimport {\n    getFileListSync,\n    copyFileSync,\n    mkdirSync,\n    fsExistsSync\n} from '../../core/systemManager/fileutils';\nimport { executeTask } from '../../core/engineManager';\nimport { TASK_CRYPTO_INSTALL_PROFILES, TASK_PROJECT_CONFIGURE, PARAMS } from '../../core/constants';\n\n\nexport const taskRnvCryptoInstallProfiles = async (c, parentTask, originTask) => {\n    logTask('taskRnvCryptoInstallProfiles');\n\n    await executeTask(c, TASK_PROJECT_CONFIGURE, TASK_CRYPTO_INSTALL_PROFILES, originTask);\n\n    if (c.platform !== 'ios') {\n        logError(\n            `taskRnvCryptoInstallProfiles: platform ${c.platform} not supported`\n        );\n        return true;\n    }\n\n    const ppFolder = path.join(\n        c.paths.home.dir,\n        'Library/MobileDevice/Provisioning Profiles'\n    );\n\n    if (!fsExistsSync(ppFolder)) {\n        logWarning(`folder ${ppFolder} does not exist!`);\n        mkdirSync(ppFolder);\n    }\n\n    const list = getFileListSync(c.paths.workspace.project.dir);\n    const mobileprovisionArr = list.filter(v => v.endsWith('.mobileprovision'));\n\n    try {\n        mobileprovisionArr.forEach((v) => {\n            logDebug(`taskRnvCryptoInstallProfiles: Installing: ${v}`);\n            copyFileSync(v, ppFolder);\n        });\n    } catch (e) {\n        logError(e);\n    }\n\n    return true;\n};\n\nexport default {\n    description: '',\n    fn: taskRnvCryptoInstallProfiles,\n    task: TASK_CRYPTO_INSTALL_PROFILES,\n    params: PARAMS.withBase(),\n    platforms: [],\n    skipPlatforms: true,\n};\n"],"file":"task.rnv.crypto.installProfiles.js"}