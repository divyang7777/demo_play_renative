{"version":3,"sources":["../../src/cli/prompt.js"],"names":["inquirerPrompt","params","c","Config","getConfig","msg","logMessage","warningMessage","message","program","ci","Array","isArray","choices","default","includes","name","Promise","resolve","reject","grey","type","inquirer","prompt","pressAnyKeyToContinue","generateOptions","inputData","isMultiChoice","mapping","renderMethod","asString","valuesAsObject","valuesAsArray","keysAsObject","keysAsArray","optionsAsArray","output","renderer","_generateOptionString","forEach","v","i","rn","push","Object","keys","k","sort","_sort","a","b","aStr","bStr","toLowerCase","com","obj","defaultVal","bold"],"mappings":"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","sourcesContent":["import inquirer from 'inquirer';\nimport { chalk, logWarning, logTask, logDebug } from '../core/systemManager/logger';\nimport Config from '../core/configManager/config';\n\nexport const inquirerPrompt = async (params) => {\n    const c = Config.getConfig();\n    const msg = params.logMessage || params.warningMessage || params.message;\n    if (c.program.ci) {\n        if (Array.isArray(params.choices) && typeof params.default !== 'undefined' && params.choices.includes(params.default)) {\n            logDebug(`defaulting to choice '${params.default}' for prompt '${params.name}'`);\n            return Promise.resolve({ [params.name]: params.default });\n        }\n        return Promise.reject(`--ci option does not allow prompts. question: ${msg}.`);\n    }\n    if (msg && params.logMessage) logTask(msg, chalk().grey);\n    if (msg && params.warningMessage) logWarning(msg);\n\n    // allow passing in just { type: 'prompt', ... } instead of { type: 'prompt', name: 'prompt', ... }\n    const { type, name } = params;\n    if (type === 'confirm' && !name) params.name = 'confirm';\n\n    return inquirer.prompt(params);\n};\n\nexport const pressAnyKeyToContinue = () => {\n    const params = {\n        type: 'input',\n        name: 'confirm',\n        message: 'Press any key to continue'\n    };\n    return inquirer.prompt(params);\n};\n\nexport const generateOptions = (\n    inputData,\n    isMultiChoice = false,\n    mapping,\n    renderMethod\n) => {\n    logDebug('generateOptions', isMultiChoice);\n    let asString = '';\n    const valuesAsObject = {};\n    const valuesAsArray = [];\n    const keysAsObject = {};\n    const keysAsArray = [];\n    const optionsAsArray = [];\n    const isArray = Array.isArray(inputData);\n\n    const output = {};\n    const renderer = renderMethod || _generateOptionString;\n    if (isArray) {\n        inputData.forEach((v, i) => {\n            const rn = renderer(i, v, mapping, v);\n            asString += rn;\n            optionsAsArray.push(rn);\n            valuesAsArray.push(v);\n            if (!mapping) keysAsArray.push(v);\n            if (!mapping) valuesAsObject[v] = v;\n        });\n    } else {\n        let i = 0;\n        Object.keys(inputData).forEach((k) => {\n            const v = inputData[k];\n            const rn = renderer(i, v, mapping, k);\n            asString += rn;\n            optionsAsArray.push(rn);\n            keysAsArray.push(k);\n            keysAsObject[k] = true;\n            valuesAsObject[k] = v;\n            valuesAsArray.push(v);\n            i++;\n        });\n    }\n    output.keysAsArray = keysAsArray.sort(_sort);\n    output.valuesAsArray = valuesAsArray.sort(_sort);\n    output.keysAsObject = keysAsObject;\n    output.valuesAsObject = valuesAsObject;\n    output.asString = asString;\n    output.optionsAsArray = optionsAsArray;\n    return output;\n};\n\nconst _sort = (a, b) => {\n    let aStr = '';\n    let bStr = '';\n    if (typeof a === 'string') {\n        // TODO: temp fix for weird issue when a/b are marked as string\n        // but toLowerCase() is undefined. need to investigate\n        aStr = a.toLowerCase ? a.toLowerCase() : a;\n        bStr = b.toLowerCase ? b.toLowerCase() : b;\n    } else {\n        if (a && a.name) aStr = a.name.toLowerCase();\n        if (b && b.name) bStr = b.name.toLowerCase();\n    }\n\n    let com = 0;\n    if (aStr > bStr) {\n        com = 1;\n    } else if (aStr < bStr) {\n        com = -1;\n    }\n    return com;\n};\n\nconst _generateOptionString = (i, obj, mapping, defaultVal) => ` [${chalk().bold.grey(i + 1)}]> ${chalk().bold.grey(mapping ? '' : defaultVal)} \\n`;\n"],"file":"prompt.js"}